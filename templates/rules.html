{% extends "base.html" %}
{% load static %}
{% load compress %}

{% block head %}
{% compress css %}
<link rel="stylesheet" type="text/css" href="{% static "css/rules.css" %}" />
{% endcompress %}
{% compress js %}
<script type="text/javascript" src="{% static "js/rules.js" %}"></script>
{% endcompress %}
{% endblock %}

{% block content %}
<form method="post" onsubmit="return false">
    <fieldset>
        {% csrf_token %}
        <div id="rules">
            {% for ruleset_name, ruleset in rules.items %}
            <div id="{{ ruleset_name }}" class="ruleset">
                <h2>{{ ruleset_name|title }}</h2>
                <div class="row header">
                    <div class="delete">Delete</div>
                    <div class="keyword">Keyword</div>
                    <div class="show_notification">Show notification</div>
                    <div class="whole_word">Whole word</div>
                    <div class="regex">Regex</div>
                </div>
                {% for rule in ruleset %}
                <div class="row{% if not rule.instance.keyword %} defaults{% else %} rule{% endif %}" data-prefix="{{ rule.prefix }}">
                    <div class="delete"><a class="delete-alt" onclick="delete_rule(this)">Delete</a></div>
                    {% if not rule.instance.keyword %}
                    <div class="label">Default values</div>
                    <div class="keyword" style="display: none">{{ rule.keyword }}</div>
                    {% else %}
                    <div class="keyword">{{ rule.keyword }}</div>
                    {% endif %}
                    <div class="show_notification">{{ rule.show_notification }}</div>
                    <div class="whole_word">{{ rule.whole_word }}</div>
                    <div class="regex">{{ rule.regex }}</div>
                    <div class="blacklist" style="display: none">{{ rule.blacklist }}</div>
                </div>
                {% endfor %}
                <div class="row add">
                    <div class="label" onclick="add_rule(this)">Add rule</div>
                </div>
            </div>
            {% endfor %}
            <div id="submit">
                <div class="row submit">
                    <input type="submit" value="Submit" onclick="form.submit()" />
                </div>
            </div>
        </div>
    </fieldset>
</form>
{% endblock %}
